{% extends "base.html" %}

{% block title %}My Recovery Journal | Eyes of an Addict{% endblock %}

{% block content %}
<main class="container">
    <header style="text-align: center; margin: 2rem 0;">
        <h1>Welcome, {{ current_user.name }}!</h1>
        <p>Your 30-Day Recovery Journal</p>
        
        <div class="progress-summary" style="display: flex; justify-content: center; gap: 2rem; margin: 2rem 0;">
            <div style="text-align: center;">
                <h3 style="color: var(--recovery-green); margin: 0;">{{ current_user.days_completed }}</h3>
                <small>Days Completed</small>
            </div>
            <div style="text-align: center;">
                <h3 style="color: var(--recovery-blue); margin: 0;">{{ current_user.current_day }}</h3>
                <small>Current Day</small>
            </div>
            <div style="text-align: center;">
                <h3 style="color: var(--recovery-purple); margin: 0;">{{ 30 - current_user.current_day + 1 }}</h3>
                <small>Days Remaining</small>
            </div>
        </div>
        
        <div style="margin: 2rem 0;">
            <a href="{{ url_for('manage_subscription') }}" role="button" class="secondary">Manage Subscription</a>
        </div>
    </header>

    <!-- Primary Recovery Journal Access -->
    <section style="text-align: center; margin: 3rem 0; padding: 2rem; background: linear-gradient(135deg, var(--recovery-green), var(--recovery-blue)); border-radius: 1rem; color: white;">
        <h2 style="color: white; margin-bottom: 1rem;">📖 Your Professional Recovery Journal</h2>
        <p style="margin-bottom: 2rem; font-size: 1.1rem;">Access your comprehensive 79-page recovery journal with interactive features and expert guidance</p>
        <a href="{{ url_for('recovery_journal') }}" role="button" style="background: white; color: var(--recovery-blue); border: none; font-weight: bold; padding: 1rem 2rem; font-size: 1.1rem;" target="_blank">
            📚 Open Your Recovery Journal
        </a>
        <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.9;">Created by D. Bailey, CPRSS - Your personal guide through recovery</p>
    </section>

    <!-- Progress Tracking Section -->
    <section class="journal-grid">
        <h2>Track Your Daily Progress</h2>
        <p style="text-align: center; margin-bottom: 2rem; color: #666;">Use these checkboxes to track your daily journal completion alongside the full journal above</p>
        <div class="journal-days" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; margin: 2rem 0;">
            {% for entry in entries %}
                <article class="day-card" style="border: 2px solid {% if entry.completed %}var(--recovery-green){% else %}#dee2e6{% endif %}; border-radius: 0.5rem; padding: 1rem; text-align: center; transition: transform 0.3s ease;">
                    <h3>Day {{ entry.day_number }}</h3>
                    {% if entry.completed %}
                        <p style="color: var(--recovery-green);">✓ Completed</p>
                        {% if entry.mood_rating %}
                            <p><small>Mood: {{ entry.mood_rating }}/10</small></p>
                        {% endif %}
                    {% elif entry.day_number == current_user.current_day %}
                        <p style="color: var(--recovery-blue);">📝 Current Day</p>
                        <a href="{{ url_for('recovery_journal') }}" role="button" style="font-size: 0.9rem;" target="_blank">Work in Journal</a>
                    {% elif entry.day_number < current_user.current_day %}
                        <p style="color: var(--recovery-orange);">⏳ Available</p>
                        <a href="{{ url_for('recovery_journal') }}" role="button" class="secondary" style="font-size: 0.9rem;" target="_blank">Continue</a>
                    {% else %}
                        <p style="color: var(--recovery-gray);">🔒 Coming Soon</p>
                        <small>Focus on current day first</small>
                    {% endif %}
                </article>
            {% endfor %}
        </div>
    </section>

    <section style="text-align: center; margin: 4rem 0; padding: 2rem; background: #f8f9fa; border-radius: 0.5rem;">
        <h3>Need Support?</h3>
        <p>Remember, recovery is a journey, not a destination. Take it one day at a time.</p>
        <a href="{{ url_for('contact') }}" role="button" class="secondary">Contact Support</a>
    </section>
</main>

<style>
.day-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}
</style>
{% endblock %}